{"swagger":"2.0","info":{"version":"1.0","title":"Restoman API","license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"tags":[{"name":"user","description":"User management"},{"name":"dish","description":"Dish management"},{"name":"order","description":"Order operations"},{"name":"auth","description":"Authentication operations"}],"host":"http://localhost:3000","basePath":"/api","consumes":["application/json"],"produces":["application/json"],"paths":{"/users":{"get":{"summary":"List of Users","operationId":"getUsers","tags":["user"],"responses":{"200":{"description":"Users list","schema":{"type":"array","items":{"$ref":"#/definitions/UserSchema"}}}}},"post":{"summary":"Create a User","operationId":"createUser","tags":["user"],"parameters":[{"name":"body","in":"body","description":"User data to be created","required":true,"schema":{"$ref":"#/definitions/UserInput"}}],"responses":{"201":{"description":"User created","schema":{"$ref":"#/definitions/UserSchema"}},"403":{"description":"Insufficient privileges\nAdmin role required"},"422":{"description":"Invalid parameters"}}}},"/users/{id}":{"get":{"summary":"Find a User by id","operationId":"findUserById","tags":["user"],"parameters":[{"name":"id","in":"path","description":"Id of User to find","required":true,"type":"integer"}],"responses":{"200":{"description":"User found","schema":{"$ref":"#/definitions/UserSchema"}},"404":{"description":"User not found for given id"}}},"put":{"summary":"Update a User by id","operationId":"updateUser","tags":["user"],"parameters":[{"name":"id","in":"path","description":"Id of User to update","required":true,"type":"integer"},{"name":"body","in":"body","description":"User data to be updated","required":true,"schema":{"$ref":"#/definitions/UserInput"}}],"responses":{"200":{"description":"User updated","schema":{"$ref":"#/definitions/UserSchema"}},"403":{"description":"Insufficient privileges\nChef and Waiter cannot update role"},"404":{"description":"User not found for given id"},"422":{"description":"Invalid parameters"}}}},"/dishes":{"get":{"summary":"List of Dishes","operationId":"getDishes","tags":["dish"],"responses":{"200":{"description":"Dishes list","schema":{"type":"array","items":{"$ref":"#/definitions/DishSchema"}}}}},"post":{"summary":"Create a Dish","operationId":"createDish","tags":["dish"],"parameters":[{"name":"body","in":"body","description":"Dish data to be created","required":true,"schema":{"$ref":"#/definitions/DishInput"}}],"responses":{"201":{"description":"Dish created","schema":{"$ref":"#/definitions/DishSchema"}},"422":{"description":"Invalid parameters"}}}},"/dishes/{id}":{"get":{"summary":"Find a Dish by id","operationId":"findDishById","tags":["dish"],"parameters":[{"name":"id","in":"path","description":"Id of Dish to find","required":true,"type":"integer"}],"responses":{"200":{"description":"Dish found","schema":{"$ref":"#/definitions/DishSchema"}},"404":{"description":"Dish not found for given id"}}},"put":{"summary":"Update a Dish by id","operationId":"updateDishById","tags":["dish"],"parameters":[{"name":"id","in":"path","description":"Id of Dish to update","required":true,"type":"integer"},{"name":"body","in":"body","description":"Dish data to be updated","required":true,"schema":{"$ref":"#/definitions/DishInput"}}],"responses":{"200":{"description":"Dish updated","schema":{"$ref":"#/definitions/DishSchema"}},"404":{"description":"Dish not found for given id"},"422":{"description":"Invalid parameters"}}},"delete":{"summary":"Delete a Dish by id","operationId":"deleteDishById","tags":["dish"],"parameters":[{"name":"id","in":"path","description":"Id of dish to delete","required":true,"type":"integer"}],"responses":{"204":{"description":"Dish deleted"},"404":{"description":"Dish not found for given id"}}}},"/orders":{"get":{"summary":"List of Orders created by User","operationId":"getOrders","tags":["order"],"responses":{"200":{"description":"Orders created by current User","schema":{"type":"array","items":{"$ref":"#/definitions/OrderSchema"}}}}},"post":{"summary":"Create an Order","operationId":"createOrder","tags":["order"],"parameters":[{"name":"body","in":"body","description":"Order data to be created","required":true,"schema":{"$ref":"#/definitions/OrderInput"}}],"responses":{"201":{"description":"Order created","schema":{"$ref":"#/definitions/OrderSchema"}},"403":{"description":"Insufficient privileges\nChef cannot create order"},"422":{"description":"Invalid parameters"}}}},"/orders/{id}":{"get":{"summary":"Find an Order by id","operationId":"findOrderById","tags":["order"],"parameters":[{"name":"id","in":"path","description":"Id of Order to find","required":true}],"responses":{"200":{"description":"Order found","schema":{"$ref":"#/definitions/OrderSchema"}},"404":{"description":"Order not found for given id"}}},"put":{"summary":"Update an Order by id","operationId":"updateOrderById","tags":["order"],"parameters":[{"name":"id","in":"path","description":"Id of Order to update","required":true},{"name":"body","in":"body","description":"Order data to be updated","required":true,"schema":{"$ref":"#/definitions/OrderUpdateInput"}}],"responses":{"200":{"description":"Order updated","schema":{"$ref":"#/definitions/OrderSchema"}},"403":{"description":"Insufficient privileges\nChef can update only order items"},"404":{"description":"Order not found for given id"},"422":{"description":"Invalid parameters"}}}},"/users/login":{"post":{"summary":"Login with User credentials","operationId":"login","tags":["auth"],"parameters":[{"name":"email","in":"query","description":"User email","required":true,"type":"string"},{"name":"password","in":"query","description":"User password","required":true,"type":"string"}],"responses":{"200":{"description":"Login successful","schema":{"$ref":"#/definitions/LoginSchema"}},"401":{"description":"Password is invalid"},"404":{"description":"User with given email doesn't exist"}}}},"/users/forgot":{"post":{"summary":"Forgot password","operationId":"forgotPassword","tags":["auth"],"parameters":[{"name":"email","in":"query","description":"Email","required":true,"type":"string"}],"responses":{"200":{"description":"Forgot password email initiated"},"404":{"description":"User with given email doesn't exist."}}}},"/users/reset":{"put":{"summary":"Reset password for User","operationId":"resetPassword","tags":["auth"],"parameters":[{"name":"email","in":"query","description":"User email","required":true,"type":"string"},{"name":"password","in":"query","description":"User password","required":true,"type":"string"},{"name":"token","in":"query","description":"Password reset token from forgot password email","required":true,"type":"string"}],"responses":{"200":{"description":"Password reset completed"},"400":{"description":"Invalid password reset token"},"404":{"description":"User with given email doesn't exist"}}}},"/users/logout":{"put":{"summary":"Logs out current User","operationId":"logout","tags":["auth"],"responses":{"204":{"description":"Logout completed"}}}}},"definitions":{"UserSchema":{"properties":{"id":{"type":"integer"},"name":{"type":"string"},"email":{"type":"string"},"role":{"type":"string","enum":["admin","chef","waiter"]},"created_at":{"type":"string","format":"datetime"},"updated_at":{"type":"string","format":"datetime"}}},"UserInput":{"required":["name","email","role"],"properties":{"name":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"password_confirmation":{"type":"string"},"role":{"type":"string","enum":["admin","chef","waiter"]}}},"DishSchema":{"properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"cost":{"type":"number","format":"double"},"image":{"type":"string"},"created_at":{"type":"string","format":"datetime"},"updated_at":{"type":"string","format":"datetime"}}},"DishInput":{"required":["name","description","cost"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"cost":{"type":"number","format":"double"},"image":{"type":"string"}}},"OrderSchema":{"properties":{"id":{"type":"integer"},"table_no":{"type":"integer"},"is_active":{"type":"boolean"},"user_id":{"type":"integer"},"order_items":{"type":"array","items":{"$ref":"#/definitions/OrderItemSchema"}},"created_at":{"type":"string","format":"datetime"},"updated_at":{"type":"string","format":"datetime"}}},"OrderInput":{"required":["table_no"],"properties":{"table_no":{"type":"integer"},"order_items":{"type":"array","items":{"$ref":"#/definitions/OrderItemInput"}}}},"OrderUpdateInput":{"required":["table_no"],"properties":{"table_no":{"type":"integer"},"order_items":{"type":"array","items":{"$ref":"#/definitions/OrderItemUpdateInput"}}}},"OrderItemSchema":{"properties":{"id":{"type":"integer"},"dish_id":{"type":"integer"},"quantity":{"type":"integer"},"status":{"type":"string","enum":["preparing","completed","cancelled"]},"created_at":{"type":"string","format":"datetime"},"updated_at":{"type":"string","format":"datetime"}}},"OrderItemInput":{"required":["dish_id","quantity"],"properties":{"dish_id":{"type":"integer"},"quantity":{"type":"integer"}}},"OrderItemUpdateInput":{"properties":{"dish_id":{"type":"integer"},"quantity":{"type":"integer"},"status":{"type":"string","enum":["preparing","completed","cancelled"]}}},"LoginSchema":{"properties":{"id":{"type":"integer"},"role":{"type":"string"},"token":{"type":"string"}}}}}